(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"124":function(e,t,n){"use strict";var c=n(300),r=n(309),a=n(308),s=n(16);t.a=function requestApi(e){var t=e.url,n=e.method,u=void 0===n?"POST":n,i=e.data,o=Object(c.a)("token"),l={};return o&&(l.authorization=o),new Promise((function(e){Object(r.a)({"url":"".concat("http://120.25.254.240:32000").concat(t),"method":u,"data":i,"header":l,"success":function success(t){if(!t.data.success&&(401===t.data.code||1e4===t.data.code))return Object(c.b)("token"),Object(c.c)("isLogin",!1),Object(a.b)({"title":"请重新登录","icon":"none"}),void Object(s.e)({"url":"/pages/index/index"});e(t.data)}})}))}},"265":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return i}));var c=n(21),r=n(29),a=n(124),s=function login(e){return new Promise(function(){var t=Object(r.a)(Object(c.a)().mark((function _callee(t){var n;return Object(c.a)().wrap((function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(a.a)({"url":"/users/login","data":e});case 2:n=c.sent,t(n);case 4:case"end":return c.stop()}}),_callee)})));return function(e){return t.apply(this,arguments)}}())},u=function isLogin(e){return new Promise(function(){var t=Object(r.a)(Object(c.a)().mark((function _callee2(t){var n;return Object(c.a)().wrap((function _callee2$(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(a.a)({"url":"/users/isLogin","data":e});case 2:n=c.sent,t(n);case 4:case"end":return c.stop()}}),_callee2)})));return function(e){return t.apply(this,arguments)}}())},i=function register(e){return new Promise(function(){var t=Object(r.a)(Object(c.a)().mark((function _callee3(t){var n;return Object(c.a)().wrap((function _callee3$(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(a.a)({"url":"/users/register","data":e});case 2:n=c.sent,t(n);case 4:case"end":return c.stop()}}),_callee3)})));return function(e){return t.apply(this,arguments)}}())}},"297":function(e,t,n){},"298":function(e,t,n){e.exports=n.p+"static/images/logo.png"},"305":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Index}));var c=n(21),r=n(29),a=n(15),s=n(17),u=n(300),i=n(16),o=n(308),l=n(263),b=n(265),j=(n(297),n(298)),p=n.n(j),d=n(125);function Index(){var e=Object(s.useState)("login"),t=Object(a.a)(e,2),n=t[0],j=t[1],f=Object(s.useState)(""),O=Object(a.a)(f,2),x=O[0],g=O[1],h=Object(s.useState)(""),m=Object(a.a)(h,2),v=m[0],w=m[1],k=Object(s.useState)(""),y=Object(a.a)(k,2),I=y[0],N=y[1];Object(s.useEffect)((function(){Object(u.a)("isLogin")&&Object(i.h)({"url":"/pages/home/index"})}),[]),Object(s.useEffect)((function(){g(""),w(""),N("")}),[n]);var _=function validate(){var e=!1;return x&&v?/^1\d{10}$/.test(x)?"register"===n&&I!==v?(e=!0,Object(o.b)({"title":"确认密码和密码不一致","icon":"none"}),e):e:(e=!0,Object(o.b)({"title":"手机号错误","icon":"none"}),e):(e=!0,Object(o.b)({"title":"请输入完整表单","icon":"none"}),e)},C=function(){var e=Object(r.a)(Object(c.a)().mark((function _callee(){var e;return Object(c.a)().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(!_()){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,Object(b.b)({"phoneNumber":x,"password":v});case 5:if((e=t.sent).success){t.next=9;break}return Object(o.b)({"title":e.msg,"icon":"error"}),t.abrupt("return");case 9:Object(o.b)({"title":"登录成功","icon":"success"}),Object(u.c)("token",e.data.token),Object(u.c)("isLogin",!0),Object(i.h)({"url":"/pages/home/index"});case 13:case"end":return t.stop()}}),_callee)})));return function loginHandler(){return e.apply(this,arguments)}}(),$=function(){var e=Object(r.a)(Object(c.a)().mark((function _callee2(){var e;return Object(c.a)().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:if(!_()){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,Object(b.c)({"phoneNumber":x,"password":v});case 5:if((e=t.sent).success){t.next=9;break}return Object(o.b)({"title":e.msg,"icon":"error"}),t.abrupt("return");case 9:Object(o.b)({"title":"注册成功","icon":"success"}),j("login");case 11:case"end":return t.stop()}}),_callee2)})));return function registerHandler(){return e.apply(this,arguments)}}();return Object(d.jsx)(l.g,{"className":"loginBox","children":Object(d.jsxs)(l.g,{"className":"loginMain","children":[Object(d.jsx)(l.c,{"className":"logoImage","src":p.a}),"login"===n?Object(d.jsxs)(d.Fragment,{"children":[Object(d.jsx)(l.d,{"className":"diyInput","type":"text","placeholder":"请输入手机号","value":x,"onInput":function onInput(e){return g(e.detail.value)}}),Object(d.jsx)(l.d,{"className":"diyInput","password":!0,"placeholder":"请输入密码","value":v,"onInput":function onInput(e){return w(e.detail.value)}}),Object(d.jsx)(l.a,{"className":"loginBtn","type":"primary","onClick":C,"children":"登录"}),Object(d.jsx)(l.g,{"className":"registerBox","children":Object(d.jsx)(l.f,{"className":"registerText","onClick":function onClick(){return j("register")},"children":"没有账号？立即注册"})})]}):Object(d.jsxs)(d.Fragment,{"children":[Object(d.jsx)(l.d,{"className":"diyInput","type":"text","placeholder":"请输入手机号","value":x,"onInput":function onInput(e){return g(e.detail.value)}}),Object(d.jsx)(l.d,{"className":"diyInput","type":"safe-password","password":!0,"placeholder":"请输入密码","value":v,"onInput":function onInput(e){return w(e.detail.value)}}),Object(d.jsx)(l.d,{"className":"diyInput","type":"safe-password","password":!0,"placeholder":"请输入确认密码","value":I,"onInput":function onInput(e){return N(e.detail.value)}}),Object(d.jsx)(l.a,{"className":"registerBtn","type":"primary","onClick":$,"children":"注册"}),Object(d.jsx)(l.g,{"className":"registerBox","children":Object(d.jsx)(l.f,{"className":"registerText","onClick":function onClick(){return j("login")},"children":"已有账号？去登录"})})]})]})})}}}]);